<html>
  <head>
    <meta charset="utf-8">
    <title>AFrame_P2</title>
    <meta name="description" content="AFrame_P2">
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-teleport-controls@0.2.0/dist/aframe-teleport-controls.min.js"></script>
    <script src="https://unpkg.com/aframe-controller-cursor-component@0.2.2/dist/aframe-controller-cursor-component.min.js"></script>
    <script src="components\palette.js"></script>
    <script src="components\button.js"></script>


  </head>
  <script>
  AFRAME.registerComponent('modify-materials', {
    init: function () {
      // Wait for model to load.
      this.el.addEventListener('model-loaded', () => {
        // Grab the mesh / scene.
        const obj = this.el.getObject3D('mesh');
        // Go over the submeshes and modify materials we want.
        obj.traverse(node => {
          if (node.name.indexOf('Tile03') !== -1) {
            node.material.color.set('#93b5d9');
          }
        });
      });
    }
  });
</script>
  <body>
    <!-- Scene. --> <!--avatar-recorder -->
    <a-scene>
      <a-assets>
        <img id="groundTexture" src="assets\textures\floor.png">
        <img id="skyTexture" src="assets\textures\Environment.png">

        <a-asset-item id="Tile-obj" src="assets\Tile1.obj"></a-asset-item>
        <a-asset-item id="Tile-mtl" src="assets\Tile1.mtl"></a-asset-item>
        <a-asset-item id="plaftorm-obj" src="assets\Plaftorm.obj"></a-asset-item>
        <a-asset-item id="plat_objs-obj" src="assets\plat_objs.obj"></a-asset-item>

        <a-mixin id="box" geometry="primitive: box" material="color: white"></a-mixin>
        <a-mixin id="cylinder" geometry="primitive: cylinder" material="color: white"></a-mixin>
        <a-mixin id="sphere" geometry="primitive: sphere" material="color: white"></a-mixin>
        <a-mixin id="cone" geometry="primitive: cone" material="color: white"></a-mixin>
      </a-assets>

      <!-- Camera. -->
      <a-camera>
        <a-cursor>
        </a-cursor>

      </a-camera>

      <!-- Entorno. -->
      <a-sky id="bg" radius="100" src="#skyTexture" theta-length="90"></a-sky>
      <a-cylinder id="ground" src="#groundTexture" radius="100" height="0.1"></a-cylinder>

      <!-- Plataformas. -->
      <a-obj-model  modify-materials static-body src="#Tile-obj" mtl="#Tile-mtl" position="-0.24 1 -4.11" rotation="0 0 0" scale="0.05 0.05 0.05" visible="true"></a-obj-model>
      <a-obj-model modify-materials="" static-body="" src="#plaftorm-obj" mtl="" position="0.56 1.01 -7.4" scale="0.01 0.01 0.01"></a-obj-model>
      <a-entity id="modify" position="-0.1 2 -5.19"></a-entity>
      <a-obj-model modify-materials="" static-body="" src="#plat_objs-obj" mtl="" position="-3.41 1.01 -8.20" scale="0.0001 0.0001 0.0001"></a-obj-model>
      <a-obj-model modify-materials="" static-body="" src="#plat_objs-obj" mtl="" position="-0.93 1.01 -8.20" scale="0.0001 0.0001 0.0001"></a-obj-model>
      <a-obj-model modify-materials="" static-body="" src="#plat_objs-obj" mtl="" position="1.74 1.01 -8.20" scale="0.0001 0.0001 0.0001"></a-obj-model>
      <a-obj-model modify-materials="" static-body="" src="#plat_objs-obj" mtl="" position="4.18 1.01 -8.20" scale="0.0001 0.0001 0.0001"></a-obj-model>

      <a-entity id="color" mixin="cylinder" scale="0.2 0.01 0.2" position="-0.11 1.1 -3.7" rotation = "25 0 0"
        palette="event: click; id:modify; colors:#a3c1bc,#ff6b6c,#ffb90f,#40ea54,#ffffff,#000000,#7180f2,#f97c46,#8df939"
      ></a-entity>


      <!-- Objetos primitivos. -->
      <a-box id="box_1" mixin="box" scale= "0.4 0.4 0.4" position="-3.38 1.8 -7.94" button_clone="event:click; id:modify" ></a-box>
      <a-entity id="box_2" mixin="box" scale= "0.2 0.2 0.2" position="-3.38 2.5 -7.94"></a-entity>
      <a-entity id="box_3" mixin="box" scale= "0.1 0.1 0.1" position="-3.38 3 -7.94"></a-entity>

      <a-entity id="cylinder_1" mixin="cylinder" scale= "0.4 0.4 0.4" position="-0.93 1.8 -8.20"></a-entity>
      <a-entity id="cylinder_2" mixin="cylinder" scale= "0.2 0.2 0.2" position="-0.93 2.5 -8.20"></a-entity>
      <a-entity id="cylinder_3" mixin="cylinder" scale= "0.1 0.1 0.1" position="-0.93 3 -8.20"></a-entity>

      <a-entity id="sphere_1" mixin="sphere" scale= "0.4 0.4 0.4" position="1.673 1.8 -8.20"></a-entity>
      <a-entity id="sphere_2" mixin="sphere" scale= "0.2 0.2 0.2" position="1.673 2.5 -8.20"></a-entity>
      <a-entity id="sphere_3" mixin="sphere" scale= "0.1 0.1 0.1" position="1.673 3 -8.20"></a-entity>

      <a-entity id="cone_1" mixin="cone" scale= "0.4 0.4 0.4" position="4.202 1.8 -8.20"></a-entity>
      <a-entity id="cone_2" mixin="cone" scale= "0.2 0.2 0.2" position="4.202 2.5 -8.20"></a-entity>
      <a-entity id="cone_3" mixin="cone" scale= "0.1 0.1 0.1" position="4.202 3 -8.20"></a-entity>

      <!-- Hands. -->
    </a-scene>
  </body>
</html>
